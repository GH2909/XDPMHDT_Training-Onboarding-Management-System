<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qu·∫£n l√Ω kh√≥a h·ªçc</title>
    <link rel="stylesheet" href="./css/course_management.css">

</head>
<body>
    <!-- Header -->
    <div class="header">
        <a href="informationHR.html"><div class="header-icon">üë§</div></a>
        <div class="header-icon">‚ò∞</div>
    </div>

    <!-- Top Banner -->
    <div class="top-banner">
        <div class="banner-left">
                        <div class="logo">
                <a href="dashboard.html"><img src="./images/baove.jpg" alt="Logo"></a>
                </div>
            <div class="welcome-text">
                <h1>Welcome, Qu·∫£n tr·ªã vi√™n ƒë√£ tr·ªü l·∫°i</h1>
                <p>ƒê√¢y l√† h·ªá th·ªëng d√†nh cho HR</p>
            </div>
        </div>
        <div class="banner-right">
            
            <button class="banner-btn"> T√†i nguy√™n</button>
            <a href="course_management.html"><button class="banner-btn"> Kh√≥a h·ªçc g·∫ßn ƒë√¢y</button></a>
            <a href="course_management.html"><button class="banner-btn"> T·∫•t c·∫£ kh√≥a h·ªçc</button></a>
        </div>
    </div>

    <div class="main-container">
        <h1 class="page-title">QU·∫¢N L√ù KH√ìA H·ªåC</h1>

        <!-- Danh s√°ch kh√≥a h·ªçc -->
        <div class="card course-list-card" id="courseListCard">
            <div class="card-header">
                <h3>üìö Danh s√°ch kh√≥a h·ªçc</h3>
                <div style="display: flex; gap: 10px;">
                    <!-- <button class="btn-secondary" onclick="exportCourses()" title="Xu·∫•t Excel">üì• Xu·∫•t</button> -->
                    <button class="btn-primary" onclick="showCreateForm()">‚ûï T·∫°o m·ªõi</button>
                </div>
            </div>
            
            <!-- Search and Filter Bar -->
            <!-- <div class="search-filter-bar">
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="üîç T√¨m ki·∫øm kh√≥a h·ªçc..." onkeyup="handleSearch()">
                    <button class="btn-clear-search" onclick="clearSearch()">‚úñ</button>
                </div>
                <div class="filter-box">
                    <select id="categoryFilter" onchange="handleFilter()">
                        <option value="">T·∫•t c·∫£ ph√¢n lo·∫°i</option>
                        <option value="Onboarding">Onboarding</option>
                        <option value="Soft_Skills">Soft Skills</option>
                        <option value="Professional_Skills">Professional Skills</option>
                        <option value="Regulations">Regulations</option>
                    </select>
                    <select id="sortBy" onchange="handleSort()">
                        <option value="name">S·∫Øp x·∫øp theo t√™n</option>
                        <option value="duration">S·∫Øp x·∫øp theo th·ªùi l∆∞·ª£ng</option>
                        <option value="category">S·∫Øp x·∫øp theo ph√¢n lo·∫°i</option>
                        <option value="newest">M·ªõi nh·∫•t</option>
                    </select>
                </div>
            </div>
             -->
            <div class="course-grid" id="courseGrid"></div>
            
            <!-- Pagination -->
            <div class="pagination" id="pagination"></div>
        </div>

        <!-- Form T·∫°o m·ªõi / Ch·ªânh s·ª≠a -->
        <div class="card form-card" id="formCard" style="display: none;">
            <div class="tabs">
                <div class="tab active" id="createTab" onclick="switchTab('create')">
                    T·∫°o kh√≥a h·ªçc
                </div>
                <div class="tab inactive" id="editTab" onclick="switchTab('edit')">
                    Ch·ªânh s·ª≠a
                </div>
            </div>

            <div class="form-content">
                <!-- Form T·∫°o m·ªõi -->
                <div id="createFormContent">
                    <div class="form-group">
                        <label>T√™n kh√≥a h·ªçc <span class="required">*</span></label>
                        <div class="input-with-btn">
                            <input type="text" class="form-control" id="courseName" placeholder="VD: Kh√≥a h·ªçc JavaScript c∆° b·∫£n">
                            <button class="btn-clear" onclick="clearInput('courseName')">‚úñ X√≥a</button>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Th·ªùi l∆∞·ª£ng (gi·ªù) <span class="required">*</span></label>
                        <div class="input-with-btn">
                            <input type="number" class="form-control" id="duration" placeholder="VD: 40" min="1">
                            <button class="btn-clear" onclick="clearInput('duration')">‚úñ X√≥a</button>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>M√¥ t·∫£ <span class="required">*</span></label>
                        <div class="input-with-btn">
                            <textarea class="form-control" id="description" rows="3" placeholder="Nh·∫≠p m√¥ t·∫£ kh√≥a h·ªçc..."></textarea>
                            <button class="btn-clear" onclick="clearInput('description')">‚úñ X√≥a</button>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Ph√¢n lo·∫°i <span class="required">*</span></label>
                        <select class="form-control" id="category">
                            <option value="">-- Ch·ªçn ph√¢n lo·∫°i --</option>
                            <option value="Onboarding">Onboarding</option>
                            <option value="Soft_Skills">Soft Skills</option>
                            <option value="Professional_Skills">Professional Skills</option>
                            <option value="Regulations">Regulations</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Module <span class="required">*</span></label>
                        <div class="module-options">
                            <label class="module-checkbox">
                                <input type="checkbox" value="PDF"> üìÑ PDF
                            </label>
                            <label class="module-checkbox">
                                <input type="checkbox" value="Video"> üé• Video
                            </label>
                            <label class="module-checkbox">
                                <input type="checkbox" value="Slide"> üìä Slide
                            </label>
                            <label class="module-checkbox">
                                <input type="checkbox" value="SCORM"> üì¶ SCORM
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>ƒêi·ªÅu ki·ªán ho√†n th√†nh kh√≥a h·ªçc <span class="required">*</span></label>
                        <div class="input-with-btn">
                            <input type="text" class="form-control" id="completion" placeholder="VD: Ho√†n th√†nh 100% b√†i h·ªçc v√† ƒë·∫°t 80% b√†i ki·ªÉm tra">
                            <button class="btn-clear" onclick="clearInput('completion')"> X√≥a</button>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button class="btn-save" onclick="saveCourse()"> L∆∞u</button>
                        <button class="btn-cancel" onclick="cancelForm()"> H·ªßy</button>
                    </div>
                </div>

                <!-- Form Ch·ªânh s·ª≠a -->
                <div id="editFormContent" style="display: none;">
                    <div class="form-group">
                        <label>Ch·ªçn kh√≥a h·ªçc ƒë·ªÉ ch·ªânh s·ª≠a</label>
                        <select id="editCourseSelect" class="form-control"  onchange="loadCourseForEdit()">
                            <option value="">-- Ch·ªçn kh√≥a h·ªçc --</option>
                        </select>
                    </div>

                    <div id="editFormFields" style="display: none;">
                        <div class="form-group">
                            <label>T√™n kh√≥a h·ªçc <span class="required">*</span></label>
                            <div class="input-with-btn">
                                <input type="text" class="form-control" id="editCourseName">
                                <button class="btn-clear" onclick="clearInput('editCourseName')">‚úñ X√≥a</button>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Th·ªùi l∆∞·ª£ng (gi·ªù) <span class="required">*</span></label>
                            <div class="input-with-btn">
                                <input type="number" class="form-control" id="editDuration" min="1">
                                <button class="btn-clear" onclick="clearInput('editDuration')">‚úñ X√≥a</button>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>M√¥ t·∫£ <span class="required">*</span></label>
                            <div class="input-with-btn">
                                <textarea class="form-control" id="editDescription" rows="3"></textarea>
                                <button class="btn-clear" onclick="clearInput('editDescription')">‚úñ X√≥a</button>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Ph√¢n lo·∫°i <span class="required">*</span></label>
                            <select class="form-control" id="editCategory">
                                <option value="">-- Ch·ªçn ph√¢n lo·∫°i --</option>
                                <option value="Onboarding">Onboarding</option>
                                <option value="Soft_Skills">Soft Skills</option>
                                <option value="Professional_Skills">Professional Skills</option>
                                <option value="Regulations">Regulations</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>Module <span class="required">*</span></label>
                            <div class="module-options" id="editModuleOptions">
                                <label class="module-checkbox">
                                    <input type="checkbox" value="PDF"> üìÑ PDF
                                </label>
                                <label class="module-checkbox">
                                    <input type="checkbox" value="Video"> üé• Video
                                </label>
                                <label class="module-checkbox">
                                    <input type="checkbox" value="Slide"> üìä Slide
                                </label>
                                <label class="module-checkbox">
                                    <input type="checkbox" value="SCORM"> üì¶ SCORM
                                </label>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>ƒêi·ªÅu ki·ªán ho√†n th√†nh kh√≥a h·ªçc <span class="required">*</span></label>
                            <div class="input-with-btn">
                                <input type="text" class="form-control" id="editCompletion">
                                <button class="btn-clear" onclick="clearInput('editCompletion')">‚úñ X√≥a</button>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button class="btn-save" onclick="updateCourse()"> C·∫≠p nh·∫≠t</button>
                            <button class="btn-danger" onclick="deleteCourse()"> X√≥a</button>
                            <button class="btn-cancel" onclick="cancelEdit()"> H·ªßy</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div class="modal" id="successModal">
        <div class="modal-content">
            <div class="modal-header success">
                <span class="modal-icon">‚úÖ</span>
                <h3 id="modalTitle">Th√†nh c√¥ng!</h3>
            </div>
            <div class="modal-body">
                <p id="modalMessage"></p>
            </div>
            <div class="modal-footer">
                <button class="btn-primary" onclick="closeModal()">ƒê√≥ng</button>
            </div>
        </div>
    </div>

    <!-- Confirm Delete Modal -->
    <div class="modal" id="confirmModal">
        <div class="modal-content">
            <div class="modal-header warning">
                <span class="modal-icon">‚ö†Ô∏è</span>
                <h3>X√°c nh·∫≠n x√≥a</h3>
            </div>
            <div class="modal-body">
                <p>B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a kh√≥a h·ªçc n√†y kh√¥ng?</p>
                <p class="text-muted">H√†nh ƒë·ªông n√†y kh√¥ng th·ªÉ ho√†n t√°c.</p>
            </div>
            <div class="modal-footer">
                <button class="btn-danger" onclick="confirmDelete()">X√≥a</button>
                <button class="btn-cancel" onclick="closeConfirmModal()">H·ªßy</button>
            </div>
        </div>
    </div>

    <!-- Course Detail Modal -->
    <div class="modal" id="detailModal">
        <div class="modal-content">
            <div class="modal-header success">
                <span class="modal-icon"></span>
                <h3 id="detailTitle">Chi ti·∫øt kh√≥a h·ªçc</h3>
            </div>
            <div class="modal-body" id="detailBody">
            </div>
            <div class="modal-footer">
                <button class="btn-primary" onclick="closeDetailModal()">ƒê√≥ng</button>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="spinner"></div>
        <p>ƒêang x·ª≠ l√Ω...</p>
    </div>

    <!-- Footer -->
    <div class="footer">
        <p>¬© 2026 HR Competency Framework System. All rights reserved.</p>
    </div>

    <script src="./js/apiService.js"></script>
    <script src="./js/course_management.js"></script>

</body>
</html>